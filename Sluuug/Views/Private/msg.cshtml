
@{
    Layout = "~/Views/Shared/private_template.cshtml";
}
@model  Slug.Model.DialogModel
@using Slug.Extensions;
<link href="~/Styles/private/dialog-style.css" rel="stylesheet" />
<link href="~/Styles/private/triangle.css" rel="stylesheet" />

<title>На связи @Model.Interlocutor</title>
<div class="dialog_pages">
    @for (int i = 1; i <= Model.PagesCount; i++)
    {
        <a href="@Url.Action("msg","private", new { id=Model.DialogId, page=i })">@i</a>
    }
</div>
<div class="dialog">
    @foreach (var item in Model.Messages)
    {
        Html.RenderPartial("~/Views/Partial/Dialogs/dialog_message.cshtml", item, new ViewDataDictionary<Slug.Model.DialogMessage>(item));
    }
</div>

<div id="user_cut_msg">
    <br />
    <span id="remote_cut_msg"></span>
    <br />
</div>
<div class="send_msg">
    <textarea id="new_msg"></textarea>
    <p>
        <button id="sendButton" name="@Model.DialogId">@Html.Translate("Button_Send_Message")</button>
    </p>
</div>

<script src="~/Scripts/chatp2pWS.js"></script>
<script src="~/Scripts/RelocationToUser.js"></script>
<script>
    window.onload = function () {
        var objDiv = $(".dialog")[0];
        objDiv.scrollTop = objDiv.scrollHeight;
    }</script>