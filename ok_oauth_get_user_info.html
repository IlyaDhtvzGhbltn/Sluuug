<!DOCTYPE html>
<!-- saved from url=(0447)https://apiok.ru/dev/methods/#{%22application_id%22:%22512000052472%22,%22application_key%22:%22CJPNMFJGDIHBABABA%22,%22application_secret_key%22:%22356D63BAAB1C8DCCF9FBB79F%22,%22permissions%22:%22VALUABLE_ACCESS;LONG_ACCESS_TOKEN%22,%22access_token%22:%22-s-cYfS1fyT29U1Gfx-yarQWhKsyeMT3FFlYXq9XkDt-LqUY6%22,%22method%22:%22users.getCurrentUser%22,%22session%22:%22oauth%22,%22oauth%22:%22server%22,%22method_params%22:{%22format%22:%22json%22}} -->
<html lang="ru"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="lang" content="ru"><meta name="url" content="/dev/methods/"><meta name="google-site-verification" content="qjo7XBSBVTNiQelK-MQT7B3sgWk9xSaaxL52PY4jVVM"><meta name="wmail-verification" content="3c1b039f9ee92b64f1a468c5eaaf0c67"><meta name="yandex-verification" content="d5a7bc8260b30c06"><title>Методы</title><meta name="title" content="Одноклассники API: Методы"><meta name="og:title" content="Одноклассники API: Методы"><meta name="description" content="Одноклассники API: Методы"><meta name="og:description" content="Одноклассники API: Методы"><meta name="og:image" content="/res/img/main/apiok-full.png"><meta name="keywords" content="Одноклассники,API,Методы"><link rel="icon" href="https://apiok.ru/res/img/favicon.png" type="image/x-icon"><link type="text/css" rel="stylesheet" href="./ok_oauth_get_user_info_files/main.css"> <script async="" src="./ok_oauth_get_user_info_files/analytics.js.Без названия"></script><script type="text/javascript" async="" src="./ok_oauth_get_user_info_files/watch.js.Без названия"></script><script type="text/javascript" async="" id="topmailru-code" src="./ok_oauth_get_user_info_files/code.js.Без названия"></script><script type="text/javascript" src="./ok_oauth_get_user_info_files/app.js.Без названия"></script></head><body><header class="site-header"><div class="content-wrapper"> <a class="site-logo" href="https://apiok.ru/"><div class="logo"></div><div class="logo-hover"></div></a><div class="search"> <form method="GET" action="https://apiok.ru/search"> <input name="q" autocomplete="off" placeholder="Поиск" type="text" minlength="3" oninput="return APIOK.Search.change(this, event)" onkeydown="return APIOK.Search.change(this, event)" onblur="return APIOK.Search.close()" onfocus="return APIOK.Search.change(this, event)"> <input name="lang" value="ru" hidden=""> <button type="submit"></button><div class="live-search"><div>Результаты поиска</div></div></form></div><span class="languages-container"> <a href="https://apiok.ru/dev/methods/"><span class="language">Русский</span></a> <a href="https://apiok.ru/en/dev/methods/"><span class="language">English</span></a> </span></div></header><div class="page-wrapper"><link rel="stylesheet" href="./ok_oauth_get_user_info_files/solid.css" integrity="sha384-QokYePQSOwpBDuhlHOsX0ymF6R/vLk/UQVz3WHa6wygxI5oGTmDTv8wahFOSspdm" crossorigin="anonymous"><link rel="stylesheet" href="./ok_oauth_get_user_info_files/fontawesome.css" integrity="sha384-vd1e11sR28tEK9YANUtpIOdjGW14pS87bUBuOIoBILVWLFnS+MCX9T6MMf0VdPGq" crossorigin="anonymous"><div class="content-wrapper"><div class="page-content"><div class="menu"><div class="menu-content"> <a href="https://apiok.ru/ext/" class="menu-elem menu-top "><div> ОК для сайтов</div></a> <a href="https://apiok.ru/dev/" class="menu-elem menu-top "><div> Разработка</div></a> <a href="https://apiok.ru/dev/app/" class="menu-elem menu-bottom "><div> Приложение</div></a> <a href="https://apiok.ru/dev/sdk/" class="menu-elem menu-bottom "><div> SDK</div></a> <a href="https://apiok.ru/dev/methods/" class="menu-elem menu-bottom selected "><div> Методы</div></a> <a href="https://apiok.ru/dev/graph_api/" class="menu-elem menu-bottom "><div> Graph API</div></a> <a href="https://apiok.ru/dev/errors" class="menu-elem menu-bottom "><div> Обработка ошибок</div></a> <a href="https://apiok.ru/dev/limits" class="menu-elem menu-bottom "><div> Ограничения приложения</div></a> <a href="https://apiok.ru/dev/examples/" class="menu-elem menu-bottom "><div> Примеры приложений</div></a> <a href="https://apiok.ru/apps/" class="menu-elem menu-top "><div> Игровая платформа</div></a> <a href="https://apiok.ru/help" class="menu-elem menu-top "><div> Помощь</div></a></div></div><div class="content"><div class="submenu"><span class="submenu-elem submenu-elem-with-breadcrumb selected"> <a href="https://apiok.ru/dev/methods/">Методы</a><span class="submenu-breadcrumb"><a href="https://apiok.ru/dev/methods/deep_links"><span class="submenu-breadcrumb-elem">Deep links</span></a><a href="https://apiok.ru/dev/methods/rest/"><span class="submenu-breadcrumb-elem">REST</span></a></span> </span></div><h1 class="clearfix"> Методы</h1><div class="island" id="methods_list"><h3 id="rest---rest"><a href="https://apiok.ru/dev/methods/rest">Список REST - методов</a></h3><p>Все методы API доступны с помощью GET и POST запросов.</p><p>Каждый метод доступен по 2 URL:</p><div class="code"><p>{api_server}fb.do?method=[method_name] - например, https://api.ok.ru/fb.do?method=friends.get</p></div><div class="code"><p>{api_server}api/[method_group]/[method_name] - например, https://api.ok.ru/api/friends/get</p></div><p>В качестве {api_server} должен использоваться соответствующий GET-параметр. Если он отсутствует, то используется https://api.ok.ru/</p></div><div class="island" id="general_params"><h3 id="section">Общие параметры запроса</h3><table><thead><tr><th class="sortable">Имя</th><th class="sortable">Требуется</th><th class="sortable">Тип</th><th class="sortable">Описание</th></tr></thead><tbody><tr><td>application_key</td><td>Да</td><td>String</td><td>Публичный ключ приложения</td></tr><tr><td>sig</td><td>Да</td><td>String</td><td>Подпись запроса</td></tr><tr><td>session_key/access_token</td><td>Нет</td><td>String</td><td>Сессия пользователя.<br>Параметр может быть обязательным, выборочным или запрещенным в зависимости от метода</td></tr><tr><td>format</td><td>Нет</td><td>String</td><td>Формат ответа метода, может быть JSON или XML</td></tr><tr><td>call_id</td><td>Нет</td><td>Long</td><td>Порядковый номер запроса</td></tr><tr><td>__online</td><td>Нет</td><td>Boolean</td><td>Отмечать ли пользователя онлайн (эффективно для приложений мессенджеров). По умолчанию true</td></tr></tbody></table></div><div class="island" id="signature_calc"><h3 id="section-1">Расчет подписи запроса</h3><ul><li>при отсутствии значения session_secret_key:<ul><li>для вызова без сессии считаем session_secret_key = application_secret_key;</li><li>для вызова в сессии session_secret_key = MD5(access_token + application_secret_key), переводим значение в нижний регистр;</li></ul></li><li>убираем из списка параметров session_key/access_token при наличии;</li><li>параметры сортируются лексикографически по ключам;</li><li>параметры соединяются в формате ключ=значение;</li><li>sig = MD5(значения_параметров + session_secret_key);</li><li>значение sig переводится в нижний регистр.</li></ul></div><script type="text/javascript"> document.addEventListener("DOMContentLoaded", function () { var calc_params = "".split('&'); if (calc_params.length == 0) { return; } for (var i = 0; i < calc_params.length; i++) { var el = calc_params[i].split('='); var key = el[0]; var value = el[1]; switch (key) { case 'method': var elem = document.getElementById('calc_input_method'); elem.value = value; elem.disabled = true; document.getElementsByClassName('calc_island_request_params_add')[0].remove(); break; case 'method_protection': document.getElementById('calc_session_no').checked = value == 'SESSION_PROHIBITED'; break; default: add_param_row(key, value); break; } } }); </script><div class="calc"><div class="island calc_island"><h3 class="calc_island_title"> Параметры приложения</h3><table class="calc_island_content"><tbody><tr><td> <input type="text" value="application_id" disabled=""></td><td> <input type="text" name="application_id" value="" placeholder="ID приложения"></td></tr><tr><td> <input type="text" value="application_key" disabled=""></td><td> <input type="text" name="application_key" value="" placeholder="Публичный ключ приложения"></td></tr><tr><td> <input type="text" value="application_secret_key" disabled=""></td><td> <input type="text" name="application_secret_key" value="" placeholder="Секретный ключ приложения"></td></tr></tbody></table></div><div class="island calc_island calc_island_session"><h3 class="calc_island_title"> Данные о сессии пользователя</h3><div class="calc_island_content"> <input id="calc_session_no" type="radio" name="session" value="no"> <label for="calc_session_no"><span></span>Без сессии</label> <input id="calc_session_oauth" type="radio" name="session" checked="" value="oauth"> <label for="calc_session_oauth"><span></span>OAuth</label> <input id="calc_session_web" type="radio" name="session" value="web"> <label for="calc_session_web"><span></span>WEB</label><table><tbody><tr class="oauth"><td> <input type="text" value="permissions" disabled=""></td><td> <input type="text" name="permissions" value="VALUABLE_ACCESS;LONG_ACCESS_TOKEN"></td></tr><tr><td colspan="2"> <input id="calc_session_oauth_client" class="oauth" type="radio" name="oauth" checked="" value="client"> <label for="calc_session_oauth_client" class="oauth"><span></span>Клиентский</label> <input id="calc_session_oauth_server" class="oauth" type="radio" name="oauth" value="server"> <label for="calc_session_oauth_server" class="oauth"><span></span>Серверный</label> <button class="oauth calc_island_session_button_oauth">OAuth</button><table><tbody><tr class="oauth client server"><td> <input type="text" value="access_token" disabled=""></td><td> <input type="text" name="access_token"></td></tr><tr class="web"><td> <input type="text" value="session_key" disabled=""></td><td> <input type="text" name="session_key"></td></tr><tr class="web client"><td> <input type="text" value="session_secret_key" disabled=""></td><td> <input type="text" name="session_secret_key"></td></tr></tbody></table></td></tr></tbody></table><div class="calc_island_oauth_example"><div class="calc_island_oauth_example_urls urls"><div><p>https://connect.ok.ru/oauth/authorize</p><p>?client_id=</p><p>&amp;scope=VALUABLE_ACCESS;LONG_ACCESS_TOKEN</p><p>&amp;response_type=token</p><p>&amp;redirect_uri=https://apiok.ru/oauth_callback</p></div></div><table class="calc_island_oauth_example_params"><tr><td>error</td><td>Прервано пользователем</td></tr></table></div></div></div><div class="island calc_island calc_island_request"><div class="calc_island_title"><h3>Метод</h3><input type="text" name="method" value="" id="calc_input_method"> <button class="calc_island_request_calculate">Сделать запрос</button></div><div class="calc_island_content"><h3>Список параметров</h3><table class="calc_island_request_params"><tbody><tr><td> <input type="text" name="param1" value="format"></td><td> <textarea name="value1">json</textarea></td><td> <input type="checkbox" id="calc_island_request_params_use_1" checked=""> <label for="calc_island_request_params_use_1"></label></td></tr><tr><td> <input type="text" name="param2" value=""></td><td> <textarea name="value2"></textarea></td><td> <input type="checkbox" id="calc_island_request_params_use_2" checked="checked"> <label for="calc_island_request_params_use_2"></label></td></tr><tr><td></td><td> <button class="calc_island_request_params_add">Добавить параметр</button></td></tr></tbody></table></div></div><div class="island calc_island calc_island_example" style="display: block;"><div class="calc_island_example_signature"><div><div class="calc_island_example_session_client calc_island_example_session_web" style="display: none;"> Используем для подписи secret_key = session_secret_key</div><div class="calc_island_example_session_no" style="display: none;"> Используем для подписи secret_key = application_secret_key</div><div class="calc_island_example_session_server" style="display: block;"> Используем для подписи secret_key = MD5(access_token + application_secret_key)</div><div class="calc_island_example_session_server long" style="display: block;"> <span class="calc_island_example_signature_calculation">MD5 (-s-cYfS1fyT29U1Gfx-yarQWhKsyeMT3FFlYXq9XkDt-LqUY6 + 356D63BAAB1C8DCCF9FBB79F)</span></div><div class="calc_island_example_session_server" style="display: block;"> secret_key = <span class="calc_island_example_signature_secret_key">8678acffae05d5139a7253bb8168d571</span></div></div><div><div> Сортируем и склеиваем параметры запроса и secret_key</div><div class="long"> <span class="calc_island_example_signature_concatenation">application_key=CJPNMFJGDIHBABABAformat=jsonmethod=users.getCurrentUser</span><span class="calc_island_example_signature_secret_key">8678acffae05d5139a7253bb8168d571</span></div></div><div><div> Рассчитываем MD5 от полученной строки и получаем параметр sig</div><div> <span class="calc_island_example_signature_result">b45cd24a6f4c197d5cc1ec6607c9cac2</span></div></div></div><div class="calc_island_example_url urls long"><div><p>https://api.ok.ru/fb.do</p><p>?application_key=CJPNMFJGDIHBABABA</p><p>&amp;format=json</p><p>&amp;method=users.getCurrentUser</p><p>&amp;sig=b45cd24a6f4c197d5cc1ec6607c9cac2</p><p>&amp;access_token=-s-cYfS1fyT29U1Gfx-yarQWhKsyeMT3FFlYXq9XkDt-LqUY6</p></div></div><pre class="calc_island_example_response json long"><span class="object"><span class="toggle">{</span><ul class=""><li class=""><span class="">uid</span>:<span class="string">587681152563</span></li><li class=""><span class="">birthday</span>:<span class="string">1998-01-01</span></li><li class=""><span class="">birthdaySet</span>:<span class="string">true</span></li><li class=""><span class="">age</span>:<span class="string">21</span></li><li class=""><span class="">first_name</span>:<span class="string">Илья</span></li><li class=""><span class="">last_name</span>:<span class="string">Рязанов</span></li><li class=""><span class="">name</span>:<span class="string">Илья Рязанов</span></li><li class=""><span class="">locale</span>:<span class="string">ru</span></li><li class=""><span class="">gender</span>:<span class="string">male</span></li><li class=""><span class="">has_email</span>:<span class="string">true</span></li><li class=""><span class="">location</span>:<span class="toggle">{</span><ul class=""><li class=""><span class="">city</span>:<span class="string"></span></li><li class=""><span class="">country</span>:<span class="string">RUSSIAN_FEDERATION</span></li><li class=""><span class="">countryCode</span>:<span class="string">RU</span></li><li class=""><span class="">countryName</span>:<span class="string">Россия</span></li></ul><span class="toggle-end">}</span></li><li class=""><span class="">online</span>:<span class="string">web</span></li><li class=""><span class="">photo_id</span>:<span class="string">892458920755</span></li><li class=""><span class="">pic_1</span>:<span class="string">https://i.mycdn.me/image?id=892458920755&amp;t=32&amp;plc=API&amp;ts=0000000000003a0237&amp;aid=512000052472&amp;tkn=*0Hb2O3jLZbH5P3WwA9uwaulPqmM</span></li><li class=""><span class="">pic_2</span>:<span class="string">https://i.mycdn.me/image?id=892458920755&amp;t=2&amp;plc=API&amp;ts=00&amp;aid=512000052472&amp;tkn=*5ESoHLHLx52o_YsAk3CFkRQsdFQ</span></li><li class=""><span class="">pic_3</span>:<span class="string">https://i.mycdn.me/image?id=892458920755&amp;t=33&amp;plc=API&amp;ts=0000000000003a0237&amp;aid=512000052472&amp;tkn=*5zydOMW4ZtFGcnfB1Qz8vrKm4-4</span></li></ul><span class="toggle-end">}</span></span></pre></div></div></div></div></div></div><script type="text/javascript"> var _tmr = window._tmr || (window._tmr = []); _tmr.push({id: "2794822", type: "pageView", start: (new Date()).getTime()}); (function (d, w, id) { if (d.getElementById(id)) return; var ts = d.createElement("script"); ts.type = "text/javascript"; ts.async = true; ts.id = id; ts.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//top-fwz1.mail.ru/js/code.js"; var f = function () {var s = d.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ts, s);}; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "topmailru-code"); </script><noscript><div style="position:absolute;left:-10000px;"> <img src="//top-fwz1.mail.ru/counter?id=2794822;js=na" style="border:0;" height="1" width="1" alt="Рейтинг@Mail.ru" /></div></noscript> <script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter43330969 = new Ya.Metrika({ id:43330969, clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true, trackHash:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div><img src="https://mc.yandex.ru/watch/43330969" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-18481786-3', 'auto'); ga('send', 'pageview'); </script></body></html>